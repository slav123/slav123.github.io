<!doctype html><html dir=ltr lang=en data-theme class="html theme--light"><head><meta charset=utf-8><title>Centralized Authentication with lldap: A Practical Guide |
Slawomir Jasinski</title><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Slawomir Jasinski"><meta name=description content="Stop managing multiple user databases. Learn how to use lldap to centralize authentication for Nextcloud, Gitea, and Grafana with this simplified LDAP guide."><link rel=stylesheet href=/scss/main.min.1cac29897bb941adf4246700acb99deffbfdf35a02ffc4ae81484456ebe430c3.css integrity="sha256-HKwpiXu5Qa30JGcArLmd7/v981oC/8SugUhEVuvkMMM=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.ca7fc969129c33659f61ae054e9e3eaf594449bc195e8842a131bc4d43284de7.css integrity="sha256-yn/JaRKcM2WfYa4FTp4+r1lESbwZXohCoTG8TUMoTec=" crossorigin=anonymous media=screen><link rel=stylesheet href=/fontawesome/css/fontawesome.min.137b1cf3cea9a8adb7884343a9a5ddddf4280f59153f74dc782fb7f7bf0d0519.css integrity="sha256-E3sc886pqK23iENDqaXd3fQoD1kVP3TceC+3978NBRk=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.e65dc5b48fb5f39b142360c57c3a215744c94e56c755c929cc3e88fe12aab4d3.css integrity="sha256-5l3FtI+185sUI2DFfDohV0TJTlbHVckpzD6I/hKqtNM=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.6f4f16d58da1c82c0c3a3436e021a3d39b4742f741192c546e73e947eacfd92f.css integrity="sha256-b08W1Y2hyCwMOjQ24CGj05tHQvdBGSxUbnPpR+rP2S8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.e10425ad768bc98ff1fb272a0ac8420f9d1ba22f0612c08ff1010c95080ffe7e.css integrity="sha256-4QQlrXaLyY/x+ycqCshCD50boi8GEsCP8QEMlQgP/n4=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://www.jasinski.us/2026/ldap-practical-guide/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Centralized Authentication with lldap: A Practical Guide"><meta name=twitter:description content="Stop managing multiple user databases. Learn how to use lldap to centralize authentication for Nextcloud, Gitea, and Grafana with this simplified LDAP guide."><meta property="og:title" content="Centralized Authentication with lldap: A Practical Guide"><meta property="og:description" content="Stop managing multiple user databases. Learn how to use lldap to centralize authentication for Nextcloud, Gitea, and Grafana with this simplified LDAP guide."><meta property="og:type" content="article"><meta property="og:url" content="https://www.jasinski.us/2026/ldap-practical-guide/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-16T09:42:07+02:00"><meta property="article:modified_time" content="2026-02-16T09:42:07+02:00"><meta property="og:site_name" content="Slawomir Slav Jasinski"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Centralized Authentication with lldap: A Practical Guide","headline":"Centralized Authentication with lldap: A Practical Guide","alternativeHeadline":"","description":"
      Stop managing multiple user databases. Learn how to use lldap to centralize authentication for Nextcloud, Gitea, and Grafana with this simplified LDAP guide.


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.jasinski.us\/2026\/ldap-practical-guide\/"},"author":{"@type":"Person","name":"slav"},"creator":{"@type":"Person","name":"slav"},"accountablePerson":{"@type":"Person","name":"slav"},"copyrightHolder":{"@type":"Person","name":"slav"},"copyrightYear":"2026","dateCreated":"2026-02-16T09:42:07.00Z","datePublished":"2026-02-16T09:42:07.00Z","dateModified":"2026-02-16T09:42:07.00Z","publisher":{"@type":"Organization","name":"slav","url":"https://www.jasinski.us/","logo":{"@type":"ImageObject","url":"https:\/\/www.jasinski.us\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/www.jasinski.us\/2026\/ldap-practical-guide\/","wordCount":"1669","genre":["DevOps","Security"],"keywords":[]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/DSF1609.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Slawomir Slav Jasinski</a></div><div class=sidebar__introduction-description><p>Forward-thinking Solutions Architect excels in cloud migration, optimizing infrastructure for peak performance and security, deploying tailored solutions.</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://linkedin.com/in/slawomirjasinski target=_blank rel="noopener me" aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/slav123 target=_blank rel="noopener me" aria-label title><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://stackoverflow.com/users/432573/ target=_blank rel="noopener me" aria-label="Stack Overflow" title="Stack Overflow"><i class="fab fa-stack-overflow fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://twitter.com/slavomirj target=_blank rel="noopener me" aria-label title><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.instagram.com/slavomirj/ target=_blank rel="noopener me" aria-label=instagram title=instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.yakconsulting.com target=_blank rel="noopener me" aria-label=business title=business><i class="fas fa-business-time fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:slav123@gmail.com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2011-2025</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3DZNELTH9"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S3DZNELTH9")</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/about/ title="About Slawomir Jasinski">About Slawomir Jasinski</a></li><li class=nav__list-item><a href=/posts/ title>Blog</a></li><li class=nav__list-item><a href=/categories/arduino/ title>Arduino</a></li><li class=nav__list-item><a href=/categories/work/ title>Work</a></li><li class=nav__list-item><a href=/contact/ title=Contact>Contact</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__thumbnail-wrapper><img class=post__thumbnail src=/images/2026/ldap-practical-guide.webp alt="Thumbnail image"></div><div class=post__content><h1>Centralized Authentication With Lldap: A Practical Guide</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>Mon, Feb 16, 2026</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>8-minute read</span></li></ul><h2 id=what-problem-does-this-solve>What problem does this solve?</h2><p>If you&rsquo;re running a homelab or a small infrastructure with multiple self-hosted services, you&rsquo;ve probably hit this wall: every service has its own user database. Nextcloud has one, Gitea has another, Portainer has its own, and so on. Add a new team member? You&rsquo;re creating accounts in five different places. Someone leaves? Good luck remembering where they had access.</p><p>LDAP solves this by giving you a <strong>single directory</strong> where all your users and groups live. Each service connects to this directory instead of maintaining its own user list. You create a user once, assign them to groups, and every connected service knows who they are and what they can access.</p><p><strong>lldap</strong> is a lightweight LDAP server built specifically for this use case. Unlike full-blown solutions like OpenLDAP or FreeIPA, lldap is simple to set up, has a clean web UI for managing users and groups, and does exactly what you need without the complexity you don&rsquo;t.</p><hr><h2 id=ldap-naming-making-sense-of-the-syntax>LDAP naming: making sense of the syntax</h2><p>LDAP uses a hierarchical naming system that looks intimidating at first glance but follows a simple logic. Let&rsquo;s break it down.</p><h3 id=domain-components-dc>Domain Components (dc)</h3><p>Your LDAP directory needs a root — a starting point for the tree. This is derived from your domain name by splitting it into <strong>Domain Components</strong>.</p><table><thead><tr><th>Your domain</th><th>LDAP Base DN</th></tr></thead><tbody><tr><td><code>example.com</code></td><td><code>dc=example,dc=com</code></td></tr><tr><td><code>yak.consulting</code></td><td><code>dc=yak,dc=consulting</code></td></tr><tr><td><code>home.lab</code></td><td><code>dc=home,dc=lab</code></td></tr><tr><td><code>myserver.local</code></td><td><code>dc=myserver,dc=local</code></td></tr></tbody></table><p>This root is called your <strong>Base DN</strong> (Distinguished Name). It&rsquo;s the foundation everything else sits on top of.</p><h3 id=the-directory-tree>The directory tree</h3><p>LDAP organizes data in a tree structure. Under your Base DN, you&rsquo;ll have <strong>Organizational Units</strong> (ou) that act like folders, and inside those you&rsquo;ll have actual entries — users and groups.</p><p>Here&rsquo;s what a typical lldap directory looks like:</p><pre tabindex=0><code>dc=yak,dc=consulting                      ← Base DN (root)
│
├── ou=people                              ← Users live here
│   ├── uid=slav                           ← A user entry
│   ├── uid=anna                           ← Another user
│   └── uid=service_reader                 ← A service account
│
└── ou=groups                              ← Groups live here
    ├── cn=lldap_admin                     ← Admin group (built-in)
    ├── cn=nextcloud_users                 ← Custom group
    ├── cn=gitea_users                     ← Custom group
    └── cn=portainer_admins                ← Custom group
</code></pre><h3 id=key-abbreviations>Key abbreviations</h3><p>These show up everywhere in LDAP configuration. Here&rsquo;s what they mean:</p><table><thead><tr><th>Abbreviation</th><th>Stands for</th><th>Used for</th><th>Example</th></tr></thead><tbody><tr><td><strong>dc</strong></td><td>Domain Component</td><td>Parts of your domain</td><td><code>dc=yak</code></td></tr><tr><td><strong>ou</strong></td><td>Organizational Unit</td><td>Folders/containers</td><td><code>ou=people</code></td></tr><tr><td><strong>uid</strong></td><td>User ID</td><td>Individual users</td><td><code>uid=slav</code></td></tr><tr><td><strong>cn</strong></td><td>Common Name</td><td>Groups and services</td><td><code>cn=admins</code></td></tr><tr><td><strong>dn</strong></td><td>Distinguished Name</td><td>Full path to any entry</td><td><code>uid=slav,ou=people,dc=yak,dc=consulting</code></td></tr></tbody></table><h3 id=reading-a-distinguished-name>Reading a Distinguished Name</h3><p>A DN is like a full file path, but written <strong>from most specific to most general</strong> (left to right = leaf to root):</p><pre tabindex=0><code>uid=slav, ou=people, dc=yak, dc=consulting
│         │          └── domain: yak.consulting
│         └── in the &#34;people&#34; folder
└── the user &#34;slav&#34;
</code></pre><p>Think of it as a reversed file path: <code>/yak.consulting/people/slav</code> becomes <code>uid=slav,ou=people,dc=yak,dc=consulting</code>.</p><hr><h2 id=setting-up-lldap>Setting up lldap</h2><h3 id=docker-compose>Docker Compose</h3><p>The simplest way to run lldap. Here&rsquo;s a production-ready compose file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lldap</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>lldap/lldap:stable</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>lldap</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;3890:3890&#34;</span>   <span style=color:#75715e># LDAP</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;17170:17170&#34;</span> <span style=color:#75715e># Web UI</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>TZ=Europe/Warsaw</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>LLDAP_JWT_SECRET=CHANGE_ME_generate_a_random_string</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>LLDAP_KEY_SEED=CHANGE_ME_another_random_string</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>LLDAP_LDAP_BASE_DN=dc=yak,dc=consulting</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>LLDAP_LDAP_USER_PASS=your_admin_password</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>lldap_data:/data</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>lldap_data</span>:
</span></span></code></pre></div><p>After starting, open <code>http://your-server:17170</code> and log in with <code>admin</code> / the password you set.</p><h3 id=first-steps-in-the-web-ui>First steps in the web UI</h3><ol><li><strong>Create a read-only service account</strong> — this is the account your services will use to query LDAP. Name it something like <code>ro_bind</code> or <code>service_reader</code>. Don&rsquo;t use the admin account for this.</li><li><strong>Create your groups</strong> — one per service you plan to connect (e.g., <code>nextcloud_users</code>, <code>gitea_users</code>, <code>portainer_admins</code>).</li><li><strong>Create your users</strong> — add real people, then assign them to the appropriate groups.</li></ol><hr><h2 id=connecting-services-to-lldap>Connecting services to lldap</h2><p>Every service that supports LDAP authentication will ask you for roughly the same set of parameters. Here&rsquo;s the universal template:</p><table><thead><tr><th>Parameter</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>LDAP URL</strong></td><td><code>ldap://lldap:3890</code></td><td>Use container name if on same Docker network</td></tr><tr><td><strong>Base DN</strong></td><td><code>dc=yak,dc=consulting</code></td><td>Your root</td></tr><tr><td><strong>Bind DN</strong></td><td><code>uid=ro_bind,ou=people,dc=yak,dc=consulting</code></td><td>Service account for queries</td></tr><tr><td><strong>Bind Password</strong></td><td>(password of ro_bind)</td><td></td></tr><tr><td><strong>User Search Base</strong></td><td><code>ou=people,dc=yak,dc=consulting</code></td><td>Where to look for users</td></tr><tr><td><strong>Group Search Base</strong></td><td><code>ou=groups,dc=yak,dc=consulting</code></td><td>Where to look for groups</td></tr></tbody></table><p>The two things that change between services are the <strong>user filter</strong> and the <strong>group filter</strong>. These control who can log in and what group membership is checked.</p><h3 id=how-authentication-works>How authentication works</h3><p>When a user tries to log in to a connected service, here&rsquo;s the sequence:</p><ol><li>The service connects to lldap using the <strong>Bind DN</strong> (the read-only service account).</li><li>It searches for the user using the <strong>user filter</strong> — e.g., &ldquo;find me a user where <code>uid</code> matches what was typed in the login form.&rdquo;</li><li>If found, the service attempts to <strong>bind</strong> (authenticate) as that user with the password they provided.</li><li>If the bind succeeds, the service optionally checks <strong>group membership</strong> to decide if the user is allowed in.</li><li>Access granted or denied.</li></ol><p>The service account never sees user passwords. It only searches the directory. The actual password check happens when lldap tries to authenticate the user directly.</p><h3 id=user-filters-explained>User filters explained</h3><p>A user filter tells the service how to find a user in LDAP. The most common ones:</p><p><strong>Basic — match by uid:</strong></p><pre tabindex=0><code>(uid={input})
</code></pre><p>The <code>{input}</code> (or <code>%s</code> or <code>{username}</code> depending on the service) gets replaced with whatever the user typed in the login form.</p><p><strong>Match by uid or email:</strong></p><pre tabindex=0><code>(|(uid={input})(mail={input}))
</code></pre><p>The <code>|</code> means OR — so users can log in with either their username or email.</p><p><strong>Restrict to a specific group:</strong></p><pre tabindex=0><code>(&amp;(uid={input})(memberOf=cn=nextcloud_users,ou=groups,dc=yak,dc=consulting))
</code></pre><p>The <code>&</code> means AND — the user must match the uid AND be a member of the specified group. This is how you control per-service access.</p><h3 id=group-filters-explained>Group filters explained</h3><p>Some services use a separate group filter instead of (or in addition to) <code>memberOf</code> in the user filter:</p><pre tabindex=0><code>(&amp;(objectClass=groupOfUniqueNames)(uniqueMember={dn}))
</code></pre><p>This finds all groups where the authenticated user is listed as a member. The service then checks if any of those groups match an allowed group.</p><hr><h2 id=practical-examples>Practical examples</h2><h3 id=nextcloud>Nextcloud</h3><p>Nextcloud has built-in LDAP support via the &ldquo;LDAP user and group backend&rdquo; app (enable it in the Apps section).</p><p><strong>Server tab:</strong></p><ul><li>Host: <code>ldap://lldap</code> (or IP)</li><li>Port: <code>3890</code></li><li>Bind DN: <code>uid=ro_bind,ou=people,dc=yak,dc=consulting</code></li><li>Bind Password: (your service account password)</li><li>Base DN: <code>dc=yak,dc=consulting</code></li></ul><p><strong>Users tab:</strong></p><ul><li>Edit LDAP Query: <code>(&(objectClass=person)(memberOf=cn=nextcloud_users,ou=groups,dc=yak,dc=consulting))</code></li></ul><p><strong>Login Attributes tab:</strong></p><ul><li>Edit LDAP Query: <code>(&(objectClass=person)(|(uid=%uid)(mail=%uid)))</code></li></ul><p><strong>Groups tab:</strong></p><ul><li>Edit LDAP Query: <code>(objectClass=groupOfUniqueNames)</code></li></ul><h3 id=gitea--forgejo>Gitea / Forgejo</h3><p>Go to Site Administration → Authentication Sources → Add Authentication Source:</p><ul><li>Authentication Type: <code>LDAP (via BindDN)</code></li><li>Host: <code>lldap</code> (or IP)</li><li>Port: <code>3890</code></li><li>Bind DN: <code>uid=ro_bind,ou=people,dc=yak,dc=consulting</code></li><li>Bind Password: (password)</li><li>User Search Base: <code>ou=people,dc=yak,dc=consulting</code></li><li>User Filter: <code>(&(objectClass=person)(|(uid=%s)(mail=%s))(memberOf=cn=gitea_users,ou=groups,dc=yak,dc=consulting))</code></li><li>Admin Filter: <code>(memberOf=cn=gitea_admins,ou=groups,dc=yak,dc=consulting)</code></li><li>Username Attribute: <code>uid</code></li><li>First Name Attribute: <code>givenName</code></li><li>Surname Attribute: <code>sn</code></li><li>Email Attribute: <code>mail</code></li></ul><p>The Admin Filter is a nice touch — it lets you automatically grant Gitea admin rights to members of a specific LDAP group.</p><h3 id=portainer>Portainer</h3><p>Settings → Authentication → LDAP:</p><ul><li>LDAP URL: <code>ldap://lldap:3890</code></li><li>Reader DN: <code>uid=ro_bind,ou=people,dc=yak,dc=consulting</code></li><li>Password: (password)</li><li>User Base DN: <code>ou=people,dc=yak,dc=consulting</code></li><li>Username Attribute: <code>uid</code></li><li>User Filter: <code>(memberOf=cn=portainer_users,ou=groups,dc=yak,dc=consulting)</code></li><li>Group Base DN: <code>ou=groups,dc=yak,dc=consulting</code></li><li>Group Membership Attribute: <code>member</code></li><li>Group Filter: <code>(objectClass=groupOfUniqueNames)</code></li></ul><h3 id=authelia-as-an-ldap-backed-identity-provider>Authelia (as an LDAP-backed identity provider)</h3><p>If you&rsquo;re using Authelia as your SSO/authentication portal, it can use lldap as its user backend. In <code>configuration.yml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>authentication_backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ldap</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>address</span>: <span style=color:#ae81ff>ldap://lldap:3890</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>base_dn</span>: <span style=color:#ae81ff>dc=yak,dc=consulting</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>users_filter</span>: <span style=color:#e6db74>&#34;(&amp;(|({username_attribute}={input})({mail_attribute}={input}))(objectClass=person))&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>groups_filter</span>: <span style=color:#e6db74>&#34;(member={dn})&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>user</span>: <span style=color:#ae81ff>uid=ro_bind,ou=people,dc=yak,dc=consulting</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>password</span>: <span style=color:#e6db74>&#34;your_service_account_password&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>attributes</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>username</span>: <span style=color:#ae81ff>uid</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>display_name</span>: <span style=color:#ae81ff>displayName</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>mail</span>: <span style=color:#ae81ff>mail</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>group_name</span>: <span style=color:#ae81ff>cn</span>
</span></span></code></pre></div><p>With Authelia in the mix, you can add two-factor authentication and single sign-on on top of your LDAP directory — services that don&rsquo;t natively support LDAP can still benefit from centralized auth through Authelia&rsquo;s forward auth.</p><hr><h2 id=access-control-strategy>Access control strategy</h2><p>Here&rsquo;s a practical approach to organizing your groups:</p><h3 id=group-naming-convention>Group naming convention</h3><p>Use a consistent pattern that makes the purpose immediately clear:</p><pre tabindex=0><code>{service}_users    → basic access to the service
{service}_admins   → admin-level access to the service
</code></pre><p>For example:</p><ul><li><code>nextcloud_users</code>, <code>nextcloud_admins</code></li><li><code>gitea_users</code>, <code>gitea_admins</code></li><li><code>portainer_users</code>, <code>portainer_admins</code></li><li><code>monitoring_viewers</code> (for Grafana read-only access)</li></ul><h3 id=example-user-to-group-mapping>Example user-to-group mapping</h3><table><thead><tr><th>User</th><th>Groups</th><th>Access</th></tr></thead><tbody><tr><td>slav</td><td><code>lldap_admin</code>, <code>nextcloud_admins</code>, <code>gitea_admins</code>, <code>portainer_admins</code>, <code>monitoring_viewers</code></td><td>Full admin everywhere</td></tr><tr><td>anna</td><td><code>nextcloud_users</code>, <code>gitea_users</code></td><td>Standard access to Nextcloud and Gitea only</td></tr><tr><td>ro_bind</td><td>(none — just a service account)</td><td>Can only read the directory, can&rsquo;t log into any service</td></tr><tr><td>client_x</td><td><code>nextcloud_users</code></td><td>Only Nextcloud access</td></tr></tbody></table><p>Adding a new person? Create one user in lldap, add them to the right groups, and they can immediately log in to all the services they need. Remove them from a group or deactivate their account and access is revoked everywhere.</p><hr><h2 id=troubleshooting-tips>Troubleshooting tips</h2><p><strong>&ldquo;User not found&rdquo; errors:</strong> Double-check the User Search Base. It should be <code>ou=people,dc=...</code>, not just the Base DN.</p><p><strong>&ldquo;Bind failed&rdquo; for the service account:</strong> Verify the full Bind DN includes <code>ou=people</code> — a common mistake is writing <code>uid=ro_bind,dc=yak,dc=consulting</code> and forgetting the OU.</p><p><strong>Users can log in but shouldn&rsquo;t be able to:</strong> Your user filter likely isn&rsquo;t checking group membership. Add the <code>memberOf=cn=...</code> condition.</p><p><strong>Group membership not working:</strong> lldap uses <code>memberOf</code> as a virtual attribute. Some services expect <code>isMemberOf</code> — check the service&rsquo;s documentation. Also verify the full group DN in your filter matches exactly, including case.</p><p><strong>Testing from the command line:</strong> You can use <code>ldapsearch</code> to verify your setup works:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Search for a specific user</span>
</span></span><span style=display:flex><span>ldapsearch -H ldap://localhost:3890 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -D <span style=color:#e6db74>&#34;uid=ro_bind,ou=people,dc=yak,dc=consulting&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -w <span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b <span style=color:#e6db74>&#34;ou=people,dc=yak,dc=consulting&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;(uid=slav)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check group membership</span>
</span></span><span style=display:flex><span>ldapsearch -H ldap://localhost:3890 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -D <span style=color:#e6db74>&#34;uid=ro_bind,ou=people,dc=yak,dc=consulting&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -w <span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b <span style=color:#e6db74>&#34;ou=groups,dc=yak,dc=consulting&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;(member=uid=slav,ou=people,dc=yak,dc=consulting)&#34;</span>
</span></span></code></pre></div><hr><h2 id=security-considerations>Security considerations</h2><p>A few things worth keeping in mind:</p><p><strong>Always use a dedicated read-only bind account.</strong> Never use your personal admin account as the Bind DN for services. If a service gets compromised, you don&rsquo;t want the attacker to have write access to your entire directory.</p><p><strong>Consider LDAPS or StartTLS.</strong> Plain LDAP sends credentials unencrypted. If lldap is on the same Docker network as your services, the risk is minimal. But if traffic crosses networks, enable TLS. lldap supports this natively — set <code>LLDAP_LDAP_TLS_CERT_FILE</code> and <code>LLDAP_LDAP_TLS_KEY_FILE</code> in your environment.</p><p><strong>Pair with Authelia or another SSO provider.</strong> LDAP handles identity and group membership, but it doesn&rsquo;t give you two-factor authentication or single sign-on by itself. Adding Authelia (or Keycloak, or Authentik) on top of lldap gives you the full picture: centralized users, 2FA, and SSO across all your services.</p><p><strong>Audit your groups periodically.</strong> It&rsquo;s easy to add people to groups and forget to clean up. A quick review every few months keeps your access control tight.</p></div><div class=post__footer><span><a class=category href=/categories/devops/>DevOps</a><a class=category href=/categories/security/>Security</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2011-2025</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3DZNELTH9"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S3DZNELTH9")</script></body></html>