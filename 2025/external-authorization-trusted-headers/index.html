<!doctype html><html dir=ltr lang=en data-theme class="html theme--light"><head><meta charset=utf-8><title>Stop Building Login Pages: How External Authorization Works |
Slawomir Jasinski</title><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Slawomir Jasinski"><meta name=description content="External authorization puts an independent service in front of your app. It handles login, MFA, and sessions. Your app just reads HTTP headers."><link rel=stylesheet href=/scss/main.min.1cac29897bb941adf4246700acb99deffbfdf35a02ffc4ae81484456ebe430c3.css integrity="sha256-HKwpiXu5Qa30JGcArLmd7/v981oC/8SugUhEVuvkMMM=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/custom.min.ca7fc969129c33659f61ae054e9e3eaf594449bc195e8842a131bc4d43284de7.css integrity="sha256-yn/JaRKcM2WfYa4FTp4+r1lESbwZXohCoTG8TUMoTec=" crossorigin=anonymous media=screen><link rel=stylesheet href=/fontawesome/css/fontawesome.min.137b1cf3cea9a8adb7884343a9a5ddddf4280f59153f74dc782fb7f7bf0d0519.css integrity="sha256-E3sc886pqK23iENDqaXd3fQoD1kVP3TceC+3978NBRk=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.e65dc5b48fb5f39b142360c57c3a215744c94e56c755c929cc3e88fe12aab4d3.css integrity="sha256-5l3FtI+185sUI2DFfDohV0TJTlbHVckpzD6I/hKqtNM=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.6f4f16d58da1c82c0c3a3436e021a3d39b4742f741192c546e73e947eacfd92f.css integrity="sha256-b08W1Y2hyCwMOjQ24CGj05tHQvdBGSxUbnPpR+rP2S8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.e10425ad768bc98ff1fb272a0ac8420f9d1ba22f0612c08ff1010c95080ffe7e.css integrity="sha256-4QQlrXaLyY/x+ycqCshCD50boi8GEsCP8QEMlQgP/n4=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://www.jasinski.us/2025/external-authorization-trusted-headers/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Stop Building Login Pages: How External Authorization Works"><meta name=twitter:description content="External authorization puts an independent service in front of your app. It handles login, MFA, and sessions. Your app just reads HTTP headers."><meta property="og:title" content="Stop Building Login Pages: How External Authorization Works"><meta property="og:description" content="External authorization puts an independent service in front of your app. It handles login, MFA, and sessions. Your app just reads HTTP headers."><meta property="og:type" content="article"><meta property="og:url" content="https://www.jasinski.us/2025/external-authorization-trusted-headers/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-13T16:42:07+02:00"><meta property="article:modified_time" content="2025-02-13T16:42:07+02:00"><meta property="og:site_name" content="Slawomir Slav Jasinski"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"posts","name":"Stop Building Login Pages: How External Authorization Works","headline":"Stop Building Login Pages: How External Authorization Works","alternativeHeadline":"","description":"
      External authorization puts an independent service in front of your app. It handles login, MFA, and sessions. Your app just reads HTTP headers.


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.jasinski.us\/2025\/external-authorization-trusted-headers\/"},"author":{"@type":"Person","name":"slav"},"creator":{"@type":"Person","name":"slav"},"accountablePerson":{"@type":"Person","name":"slav"},"copyrightHolder":{"@type":"Person","name":"slav"},"copyrightYear":"2025","dateCreated":"2025-02-13T16:42:07.00Z","datePublished":"2025-02-13T16:42:07.00Z","dateModified":"2025-02-13T16:42:07.00Z","publisher":{"@type":"Organization","name":"slav","url":"https://www.jasinski.us/","logo":{"@type":"ImageObject","url":"https:\/\/www.jasinski.us\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/www.jasinski.us\/2025\/external-authorization-trusted-headers\/","wordCount":"975","genre":["Blog","Go","DevOps","Security"],"keywords":[]}</script></head><body class=body><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/DSF1609.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Slawomir Slav Jasinski</a></div><div class=sidebar__introduction-description><p>Forward-thinking Solutions Architect excels in cloud migration, optimizing infrastructure for peak performance and security, deploying tailored solutions.</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://linkedin.com/in/slawomirjasinski target=_blank rel="noopener me" aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/slav123 target=_blank rel="noopener me" aria-label title><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://stackoverflow.com/users/432573/ target=_blank rel="noopener me" aria-label="Stack Overflow" title="Stack Overflow"><i class="fab fa-stack-overflow fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://twitter.com/slavomirj target=_blank rel="noopener me" aria-label title><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.instagram.com/slavomirj/ target=_blank rel="noopener me" aria-label=instagram title=instagram><i class="fab fa-instagram fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.yakconsulting.com target=_blank rel="noopener me" aria-label=business title=business><i class="fas fa-business-time fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:slav123@gmail.com target=_blank rel="noopener me" aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
2011-2025</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3DZNELTH9"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S3DZNELTH9")</script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/about/ title="About Slawomir Jasinski">About Slawomir Jasinski</a></li><li class=nav__list-item><a href=/posts/ title>Blog</a></li><li class=nav__list-item><a href=/categories/arduino/ title>Arduino</a></li><li class=nav__list-item><a href=/categories/work/ title>Work</a></li><li class=nav__list-item><a href=/contact/ title=Contact>Contact</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__thumbnail-wrapper><img class=post__thumbnail src=/images/2026/external-authorization.webp alt="Thumbnail image"></div><div class=post__content><h1>Stop Building Login Pages: How External Authorization Works</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>Thu, Feb 13, 2025</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>5-minute read</span></li></ul><h1 id=stop-building-login-pages-how-external-authorization-works>Stop Building Login Pages: How External Authorization Works</h1><p>You&rsquo;ve got a web app. It needs authentication. The reflex is to bolt on a login system — sessions, password hashing, MFA, the whole stack. But there&rsquo;s a pattern that removes all of that from your application entirely.</p><p>External authorization puts an independent service in front of your app. It handles login flows, multi-factor authentication, and session management. Your app just receives the result: a set of HTTP headers telling it who the user is.</p><h2 id=how-the-flow-works>How the Flow Works</h2><p>Every request to your application first passes through a reverse proxy — Caddy, Nginx, Traefik, or similar. Before forwarding anything to your backend, the proxy makes a side request to an authorization service: &ldquo;Is this person authenticated?&rdquo;</p><p>Two things can happen. If the user has a valid session, the auth service responds with 200 OK and includes identity headers — username, email, display name, group memberships. The proxy injects those headers into the original request and forwards it to your app. If there&rsquo;s no valid session, the user gets redirected to a login portal where they authenticate (password, MFA, passkeys — whatever the auth service supports). After successful login, they&rsquo;re sent back and the flow completes normally.</p><p>Your backend never sees unauthenticated requests. It never stores passwords. It never renders a login form. It just reads a few headers and knows exactly who&rsquo;s knocking.</p><h2 id=the-trusted-headers>The Trusted Headers</h2><p>The convention across most external auth systems looks like this:</p><table><thead><tr><th>Header</th><th>What it carries</th></tr></thead><tbody><tr><td><code>Remote-User</code></td><td>Username or unique ID</td></tr><tr><td><code>Remote-Email</code></td><td>Email address</td></tr><tr><td><code>Remote-Name</code></td><td>Display name</td></tr><tr><td><code>Remote-Groups</code></td><td>Comma-separated group list</td></tr></tbody></table><p>Some systems use slightly different naming (Authentik prefixes everything with <code>X-Authentik-</code>, for instance), but the concept is identical. Your app reads headers, extracts user info, and makes authorization decisions based on group membership or identity.</p><h2 id=the-tools>The Tools</h2><p><strong>Authelia</strong> is a lightweight, open-source auth server written in Go. Under 20 MB, under 30 MB RAM in use, and fast. It supports TOTP, WebAuthn, push notifications, and OpenID Connect. It&rsquo;s designed specifically as a companion to reverse proxies and works out of the box with Caddy, Traefik, Nginx, and HAProxy. If you want something minimal that does the job well, this is it.</p><p><strong>Authentik</strong> is the heavier alternative. It comes with a full admin UI, user management console, LDAP and SAML support, and social login providers. Think of it as a self-hosted identity platform rather than just an auth gateway. Great if you need to manage users across many services or need enterprise features. More resources required, more capabilities in return.</p><p><strong>Vouch Proxy</strong> takes a different angle. Instead of being a full identity provider, it delegates authentication to existing OAuth/OIDC providers — Google, GitHub, Keycloak, or anything that speaks the protocol. It&rsquo;s a thin bridge that translates OAuth sessions into trusted headers for your proxy. Useful when you already have an identity provider and just need the proxy integration layer.</p><p><strong>Caddy</strong> deserves a mention on the proxy side specifically. Its <code>forward_auth</code> directive makes external authorization a first-class feature. You point it at your auth service, tell it which response headers to copy, and you&rsquo;re done. No Lua scripts, no complex subrequest configuration. A few lines in the Caddyfile and the entire flow is wired up. Nginx and Traefik can do the same thing, but Caddy makes it noticeably easier.</p><h2 id=what-your-app-needs-to-do>What Your App Needs to Do</h2><p>Almost nothing. That&rsquo;s the appeal.</p><p>In Go, you write a middleware that reads the <code>Remote-User</code> header and rejects requests where it&rsquo;s empty. You parse the groups header if you need role-based access. You store the user info in the request context. A dozen lines of code, no external dependencies.</p><p>In PHP, the headers arrive as <code>$_SERVER</code> variables (<code>HTTP_REMOTE_USER</code>, <code>HTTP_REMOTE_EMAIL</code>, etc.). You check if they&rsquo;re present, extract the values, and carry on. In Laravel, this becomes a middleware class. In plain PHP, it&rsquo;s a couple of functions.</p><p>There&rsquo;s no token validation, no cryptographic verification, no library to install. The trust model is entirely network-based — which leads to the most important part.</p><h2 id=the-security-contract>The Security Contract</h2><p>Trusted headers have no built-in integrity check. There&rsquo;s no signature. No encryption. If someone can reach your application directly — bypassing the proxy — they can set <code>Remote-User: admin</code> and walk right in.</p><p>This means the security of the entire system depends on one thing: <strong>your app must be unreachable except through the proxy.</strong></p><p>In Docker, this means not publishing your app&rsquo;s ports. On bare metal, it means binding to <code>127.0.0.1</code> or a private network interface. If neither is possible, your app should validate that requests come from the proxy&rsquo;s IP address and reject everything else.</p><p>The reverse proxy also has a job here. It must strip any <code>Remote-*</code> headers from the original client request before making the auth subrequest. Otherwise, a malicious client could send pre-set headers that survive the proxy chain. Caddy&rsquo;s <code>forward_auth</code> handles this automatically. Nginx and Traefik need explicit configuration to do it right.</p><h2 id=trusted-headers-vs-openid-connect>Trusted Headers vs. OpenID Connect</h2><p>External auth systems typically support both approaches. Trusted headers are simpler — no libraries, no token lifecycle, no refresh logic. They work perfectly for apps behind a single proxy, internal tools, dashboards, and self-hosted services.</p><p>OpenID Connect is the right choice when your app lives across multiple domains, when it needs to make API calls on behalf of the user, or when you&rsquo;re building something that third parties will integrate with. It&rsquo;s more work to implement, but it carries its own proof of authenticity in every token.</p><p>The good news is that both Authelia and Authentik support OIDC alongside trusted headers. You can start with headers for simplicity and switch to OIDC later if the requirements grow — without changing your auth infrastructure.</p><p>For most self-hosted and internal scenarios, trusted headers are the pragmatic starting point. Simple to implement, simple to debug, and one less thing your application has to worry about.</p></div><div class=post__footer><span><a class=category href=/categories/blog/>Blog</a><a class=category href=/categories/go/>Go</a><a class=category href=/categories/devops/>DevOps</a><a class=category href=/categories/security/>Security</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
2011-2025</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S3DZNELTH9"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S3DZNELTH9")</script></body></html>